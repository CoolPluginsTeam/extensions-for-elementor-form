class ReCaptchaHandler extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{recaptchaContainer:".g-recaptcha"}}}getDefaultElements(){const e=this.getSettings("selectors");return{$recaptchaContainers:this.$element.find(e.recaptchaContainer),$form:jQuery("form").has(e.recaptchaContainer)}}bindEvents(){this.waitForElementor(()=>{this.loadRecaptchaScript(()=>{this.initRecaptcha()})})}waitForElementor(e){"undefined"!=typeof elementorFrontend&&elementorFrontend.hooks?e():setTimeout(()=>this.waitForElementor(e),1e4)}loadRecaptchaScript(e){if("undefined"!=typeof grecaptcha)return void e();const t=this.elements.$recaptchaContainers[0],a=t.getAttribute("data-recaptcha-version"),n=t.getAttribute("data-badge");if("v3"==a&&coolFormKitRecaptcha3.site_key){const t=document.createElement("script");t.src=`https://www.google.com/recaptcha/api.js?onload=recaptchaLoaded&render=${coolFormKitRecaptcha3.site_key}&badge=${n}`,t.async=!0,t.defer=!0,document.body.appendChild(t),window.recaptchaLoaded=(()=>{e()})}else{const t=document.createElement("script");t.src="https://www.google.com/recaptcha/api.js?onload=recaptchaLoaded&render=explicit",t.async=!0,t.defer=!0,document.body.appendChild(t),window.recaptchaLoaded=(()=>{e()})}}initRecaptcha(){if("undefined"==typeof grecaptcha)return void console.error("❌ ERROR: Google reCAPTCHA API not loaded!");if(this.elements.$recaptchaContainers.each(function(){const e=jQuery(this),t=e.attr("data-sitekey"),a=e.attr("data-theme")||"light",n=e.attr("data-size")||"normal";if(t)try{grecaptcha.render(e[0],{sitekey:t,theme:a,size:n})}catch(e){}else console.warn("⚠️ reCAPTCHA site key is missing!")}),!this.elements.$form.length)return void console.warn("⚠️ No form found for reCAPTCHA validation.");const e=this.elements.$recaptchaContainers[0],t=e.getAttribute("data-recaptcha-version");"v3"==t&&grecaptcha.ready(()=>{grecaptcha.execute(coolFormKitRecaptcha3.site_key,{action:"submit"}).then(e=>{if(!e)return void console.error("❌ reCAPTCHA token missing!");let t=this.elements.$form.find('input[name="g-recaptcha-response"]');t.length||(t=jQuery('<input type="hidden" name="g-recaptcha-response">'),this.elements.$form.append(t)),t.val(e)})})}}jQuery(window).on("elementor/frontend/init",()=>{const e=e=>{elementorFrontend.elementsHandler.addHandler(ReCaptchaHandler,{$element:e})};elementorFrontend.hooks.addAction("frontend/element_ready/cool-form.default",e)});